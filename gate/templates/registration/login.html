{% extends "gate/base.html" %}
{% load static %}

{% block title %}Sign in Â· GateFlow{% endblock %}

{% block content %}
<script src="https://cdn.tailwindcss.com"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
  
  body { font-family: 'Plus Jakarta Sans', sans-serif; }

  /* Target Django Form Inputs */
  .login-form input {
    width: 100%;
    padding: 0.875rem 1rem;
    border-radius: 0.75rem;
    border: 1px solid #e2e8f0; /* slate-200 */
    background-color: #f8fafc; /* slate-50 */
    transition: all 0.2s;
    outline: none;
    font-size: 0.95rem;
    color: #1e293b;
  }
  
  .login-form input:focus {
    background-color: #ffffff;
    border-color: #7c3aed; /* violet-600 */
    box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.1);
  }

  .login-form label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: #475569; /* slate-600 */
    margin-bottom: 0.5rem;
    margin-top: 1rem;
  }
</style>

<div class="min-h-screen w-full flex bg-[#f8fafc]">

  <div class="hidden lg:flex w-1/2 bg-gradient-to-br from-violet-600 to-indigo-800 relative overflow-hidden items-center justify-center p-12">
    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent to-black/20"></div>
    
    <div class="relative z-10 text-center text-white max-w-lg">
      <div class="mb-8 flex justify-center">
        <div class="h-24 w-24 bg-white/10 backdrop-blur-md rounded-3xl flex items-center justify-center border border-white/20 shadow-2xl">
           <img src="{% static 'gate/coer.jpg' %}" alt="Logo" class="h-14 w-auto drop-shadow-lg">
        </div>
      </div>
      <h1 class="text-5xl font-extrabold tracking-tight mb-4">GateFlow</h1>
      <p class="text-lg text-violet-100 font-medium leading-relaxed">
        Secure, seamless campus movement management. <br> Simplify your gate passes and leave requests.
      </p>
    </div>
  </div>

  <div class="w-full lg:w-1/2 flex items-center justify-center p-6 sm:p-12 relative">
    
    <div class="absolute inset-0 lg:hidden bg-gradient-to-br from-violet-50 to-slate-100 -z-10"></div>

    <div class="w-full max-w-md bg-white p-8 sm:p-10 rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100">
      
      <div class="lg:hidden flex items-center gap-3 mb-8 justify-center">
        <div class="h-10 w-10 bg-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-violet-200">
          <img src="{% static 'gate/logoW.png' %}" alt="Logo" class="h-6 w-auto brightness-0 invert">
        </div>
        <span class="text-2xl font-extrabold text-slate-800">GateFlow</span>
      </div>

      <div class="mb-8">
        <h2 class="text-2xl font-bold text-slate-900">Welcome back! ðŸ‘‹</h2>
        <p class="text-slate-500 mt-2 text-sm">Please enter your credentials to access your dashboard.</p>
      </div>

      {% if form.errors %}
        <div class="mb-6 p-4 rounded-xl bg-red-50 border border-red-100 flex items-start gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
          </svg>
          <div class="text-sm text-red-700 font-medium">
             Invalid username or password. Please try again.
          </div>
        </div>
      {% endif %}

      <form method="post" class="login-form">
        {% csrf_token %}
        
        <div>
           <label for="id_username">Username / Enrollment ID</label>
           {{ form.username }}
        </div>

        <div class="mt-4">
           <div class="flex justify-between items-center mb-2 mt-4">
             <label for="id_password" class="!mb-0 !mt-0">Password</label>
             <a href="{% url 'password_reset' %}" class="text-xs font-semibold text-violet-600 hover:text-violet-700 hover:underline">
               Forgot password?
             </a>
           </div>
           {{ form.password }}
        </div>

        <button type="submit" class="w-full mt-8 bg-violet-600 hover:bg-violet-700 text-white font-bold py-3.5 px-4 rounded-xl shadow-lg shadow-violet-200 transition-all transform hover:-translate-y-0.5 active:translate-y-0 flex justify-center items-center gap-2">
          Sign In
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
      </form>
      
      <p class="mt-8 text-center text-xs text-slate-400">
        Â© 2025 GateFlow Campus System. All rights reserved.
      </p>

    </div>
  </div>
</div>
{% endblock %}